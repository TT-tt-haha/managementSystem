{"remainingRequest":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\javacode\\elementUI\\euiadmin\\src\\views\\module\\Table.vue?vue&type=style&index=0&id=1168c5e5&scoped=true&lang=css&","dependencies":[{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\src\\views\\module\\Table.vue","mtime":1610870593239},{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\javacode\\elementUI\\euiadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KI2FzaWRlIHsNCiAgaGVpZ2h0OiAxMDB2aDsNCn0NCiNtYWluIHsNCiAgaGVpZ2h0OiAxMDB2aDsNCiAgb3ZlcmZsb3c6IGF1dG87DQp9DQovKua7muWKqOadoeeahOWuveW6piovDQo6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgd2lkdGg6IDlweDsNCiAgaGVpZ2h0OiA5cHg7DQp9DQoNCi8q5aSW5bGC6L2o6YGT44CC5Y+v5Lul55SoZGlzcGxheTpub25l6K6p5YW25LiN5pi+56S677yM5Lmf5Y+v5Lul5re75Yqg6IOM5pmv5Zu+54mH77yM6aKc6Imy5pS55Y+Y5pi+56S65pWI5p6cKi8NCjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgew0KICB3aWR0aDogNnB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmNmZjOw0KICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJlbTsNCiAgLW1vei1ib3JkZXItcmFkaXVzOiAyZW07DQogIGJvcmRlci1yYWRpdXM6IDJlbTsNCn0NCg0KLyrmu5rliqjmnaHnmoTorr7nva4qLw0KDQo6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1NmM2YzsNCiAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsNCiAgbWluLWhlaWdodDogMXB4Ow0KICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDJlbTsNCiAgLW1vei1ib3JkZXItcmFkaXVzOiAyZW07DQogIGJvcmRlci1yYWRpdXM6IDJlbTsNCn0NCi8q5rua5Yqo5p2h56e75LiK5Y6755qE6IOM5pmvKi8NCg0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQp9DQo="},{"version":3,"sources":["Table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Table.vue","sourceRoot":"src/views/module","sourcesContent":["<template>\r\n  <!-- eslint-disable -->\r\n  <el-container id=\"aside\">\r\n    <vAsideSpace />\r\n    <el-container>\r\n      <el-header :height=\"head_height\" :style=\"{backgroundColor:head_background_color}\">\r\n        <vHeadSpace />\r\n      </el-header>\r\n      <el-main id=\"main\" :style=\"{backgroundColor:main_background_color}\">\r\n        <el-container>\r\n          <el-aside width=\"200px\"> <h1>区域信息</h1>\r\n            <el-tree :data=\"data\" :props=\"defaultProps\" style=\"margin-top: 20px\" @node-click=\"handleNodeClick\"></el-tree></el-aside>\r\n          <el-main>\r\n            <el-tabs v-model=\"editableTabsValue\" type=\"card\" editable @edit=\"handleTabsEdit\">\r\n              <el-tab-pane\r\n                      :key=\"item.name\"\r\n                      v-for=\"(item) in editableTabs\"\r\n                      :label=\"item.title\"\r\n                      :name=\"item.name\"\r\n              >\r\n                <el-row>\r\n                  <el-col :span=\"12\" :offset=\"22\"><el-button type=\"primary\" style=\"margin:5px\" @click=\"exportInfo\">导出</el-button></el-col>\r\n                </el-row>\r\n\r\n                <el-table\r\n                        :data=\"tableData.filter(data => !search || data.name.toLowerCase().includes(search.toLowerCase()))\"\r\n                        style=\"width: 100%\">\r\n                  <el-table-column\r\n                          label=\"Id\"\r\n                          prop=\"uid\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                          label=\"Name\"\r\n                          prop=\"uname\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                          label=\"Number\"\r\n                          prop=\"unum\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                          label=\"Tel\"\r\n                          prop=\"utele\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                          label=\"Building\"\r\n                          prop=\"umenuName\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                          align=\"right\">\r\n                    <template slot=\"header\" slot-scope=\"scope\">\r\n                      <el-input\r\n                              v-model=\"search\"\r\n                              size=\"mini\"\r\n                              placeholder=\"输入关键字搜索\"/>\r\n                    </template>\r\n                    <template slot-scope=\"scope\">\r\n                      <el-button\r\n                              size=\"mini\"\r\n                              @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n                      <el-popconfirm\r\n                              confirmButtonText='好的'\r\n                              cancelButtonText='不用了'\r\n                              icon=\"el-icon-info\"\r\n                              iconColor=\"red\"\r\n                              title=\"确定要删除当前用户吗？\"\r\n                              @confirm=\"handleDelete(scope.$index, scope.row)\"></el-popconfirm>\r\n                      <el-button\r\n                              size=\"mini\"\r\n                              type=\"danger\"\r\n                              @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n                <el-row>\r\n                  <el-col :span=\"12\" :offset=\"8\">\r\n                    <el-pagination style=\"margin: 15px 0px\"\r\n                                   layout=\"prev, pager, next,jumper,total,sizes\" :page-sizes=\"[1,2,4,8]\" :page-size=\"size\" :current-page=\"pageNow\"\r\n                                   @current-change=\"findPage\"\r\n                                   @size-change=\"findSize\"\r\n                                   :total=\"total\">\r\n                    </el-pagination>\r\n                  </el-col>\r\n                </el-row>\r\n                <el-button type=\"primary\" style=\"margin:10px\" @click=\"saveUserInfo\">添加用户</el-button>\r\n\r\n                <transition name=\"el-zoom-in-center\">\r\n                  <div v-show=\"show\" class=\"transition-box\">\r\n                    <el-form :hide-required-asterisk=\"false\" :rules=\"rules\" ref=\"userForm\" :model=\"form\"  label-suffix=\":\" label-width=\"80px\">\r\n                      <el-form-item label=\"姓名\" prop=\"name\">\r\n                        <el-input @input=\"changeFn\"  v-model=\"form.uName\"></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"用户编号\" prop=\"uNum\">\r\n                        <el-input @input=\"changeFn\" v-model=\"form.uNum\"></el-input>\r\n                      </el-form-item>\r\n\r\n                      <el-form-item label=\"用户电话\" prop=\"uTele\">\r\n                        <el-input @input=\"changeFn\" v-model=\"form.uTele\"></el-input>\r\n                      </el-form-item>\r\n\r\n                      <el-form-item label=\"单元编号\" prop=\"unitId\">\r\n                        <el-input @input=\"changeFn\" v-model=\"form.pId\"></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item label=\"详细位置\" prop=\"location\">\r\n                        <el-input @input=\"changeFn\" v-model=\"form.menuName\"></el-input>\r\n                      </el-form-item>\r\n                      <el-form-item>\r\n                        <el-button type=\"primary\" @click=\"onSubmit('userForm')\">保存信息</el-button>\r\n                        <el-button @click=\"saveUserInfo\">重置</el-button>\r\n                      </el-form-item>\r\n                    </el-form>\r\n                  </div>\r\n                </transition>\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-main>\r\n        </el-container>\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n<script>\r\n  /* eslint-disable */\r\nimport axios from \"axios\";\r\n\r\n  export default {\r\n  data() {\r\n    return {\r\n      data: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'menuName'\r\n      },\r\n      menuName:'',\r\n      total:0,\r\n      size:4,\r\n      pageNow:1,\r\n      editableTabsValue: '2',\r\n      editableTabs: [],\r\n      tabIndex: 0,\r\n      tableData: [],\r\n      search: '',\r\n      temp:'',\r\n      url:'',\r\n      show:false,\r\n      form: {\r\n        uName: '',\r\n        uId:'',\r\n        qingzhouId:'',\r\n        officeId:'',\r\n        communityId:'',\r\n        buildingId:'',\r\n        pId:'',\r\n        menuName:'',\r\n        uNum:'',\r\n        uTele:''\r\n      },\r\n      rules: {\r\n        // uId: [{ required: true, message: '请输入用户姓名', trigger: 'blur' }],\r\n        // buildingId: [{ required: true, message: '请输入楼栋编号', trigger: 'blur' }],\r\n        // unitId: [{ required: true, message: '请输入单元编号', trigger: 'blur' }],\r\n        // location: [{ required: true, message: '请输入详细位置编号', trigger: 'blur' }],\r\n        uNum: [{ required: true, message: '请输入用户编号', trigger: 'blur' }],\r\n        uTele: [{ required: true, message: '请输入用户电话', trigger: 'blur' }],\r\n\r\n\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    changeFn(){\r\n      this.$forceUpdate();\r\n    },\r\n    findSize(size){\r\n      this.size = size;\r\n      this.findAllData(1,1001,this.page,size)\r\n    },\r\n    findPage(page){\r\n      this.page = page;\r\n      this.findAllData(1,1001,page,this.size);\r\n    },\r\n    findAllData(level,id,page,size){\r\n      page = page?page:this.pageNow,\r\n      size=size?size:this.size,\r\n      this.$http.get(\"http://localhost:8989/user/\"+level+\"/\"+id+\"?pageNow=\"+page+\"&pageSize=\"+size).then(res=>{\r\n        this.tableData = res.data.users;\r\n        this.total = res.data.total;\r\n      });\r\n    },\r\n    findTreeData(){\r\n      this.$http.get(\"http://localhost:8989/treedata\").then(res=>{\r\n        this.data=res.data;\r\n      });\r\n    },\r\n    exportInfo(){\r\n      var url = \"http://localhost:8989/export\";\r\n      window.location.href = url;\r\n    },\r\n    saveUserInfo(){\r\n      this.show=true;\r\n      this.form = {};\r\n    },\r\n    onSubmit(userForm) {\r\n      // console.log(this.$refs[userForm][0])\r\n      this.$refs[userForm][0].validate((valid) => {\r\n        if (valid) {\r\n          let pId = this.form.pId;\r\n          let qs=require('qs');\r\n          var instance = axios.create({ headers: {'content-type': 'application/x-www-form-urlencoded'} });\r\n\r\n          instance.post(\"http://localhost:8989/user/save/\"+pId,qs.stringify(this.form)).then(res=>{\r\n            if(res.data.status){\r\n              this.$message({\r\n                message: '恭喜你，'+res.data.msg,\r\n                type: 'success'\r\n              });\r\n              this.findAllData(1,1001);\r\n              this.findTreeData();\r\n              this.show=false;\r\n            }else{\r\n              this.$message.error(res.data.msg);\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"当前输入不合法！\");\r\n          return false;\r\n        }\r\n      });\r\n\r\n    },\r\n    handleEdit(index, row) {\r\n      console.log(row);\r\n      this.show=true;\r\n      this.form = row;\r\n      this.form.uId = row.uid;\r\n      this.form.uName = row.uname;\r\n      this.form.uNum = row.unum;\r\n      this.form.uTele = row.utele;\r\n      this.form.pId = row.upid;\r\n      this.form.menuName =row.umenuName;\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(index, row);\r\n      this.$http.get(\"http://localhost:8989/user/delete?id=\" + row.u_id).then(res => {\r\n        if (res.data.status) {\r\n          this.$message({\r\n            message: res.data.msg,\r\n            type: 'success'\r\n          });\r\n          this.findAllData(1,1001,this.pageNow,this.size);//刷新数据\r\n        } else {\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    handleNodeClick(data) {\r\n      let id = data.menuId;\r\n      let level = data.level;\r\n      console.log(data);\r\n      let newTabName = ++this.tabIndex + '';\r\n      this.editableTabs.push({\r\n        title: data.menuName,\r\n        name: newTabName,\r\n        content: this.findAllData(level,id,this.pageNow,this.size)\r\n      });\r\n      this.editableTabsValue = newTabName;\r\n    },\r\n    handleTabsEdit(targetName, action) {\r\n\r\n      if (action === 'remove') {\r\n        let tabs = this.editableTabs;\r\n        let activeName = this.editableTabsValue;\r\n        if (activeName === targetName) {\r\n          tabs.forEach((tab, index) => {\r\n            if (tab.name === targetName) {\r\n              let nextTab = tabs[index + 1] || tabs[index - 1];\r\n              if (nextTab) {\r\n                activeName = nextTab.name;\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        this.editableTabsValue = activeName;\r\n        this.editableTabs = tabs.filter(tab => tab.name !== targetName);\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.findTreeData();\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n#aside {\r\n  height: 100vh;\r\n}\r\n#main {\r\n  height: 100vh;\r\n  overflow: auto;\r\n}\r\n/*滚动条的宽度*/\r\n::-webkit-scrollbar {\r\n  width: 9px;\r\n  height: 9px;\r\n}\r\n\r\n/*外层轨道。可以用display:none让其不显示，也可以添加背景图片，颜色改变显示效果*/\r\n::-webkit-scrollbar-track {\r\n  width: 6px;\r\n  background-color: #f2f6fc;\r\n  -webkit-border-radius: 2em;\r\n  -moz-border-radius: 2em;\r\n  border-radius: 2em;\r\n}\r\n\r\n/*滚动条的设置*/\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background-color: #f56c6c;\r\n  background-clip: padding-box;\r\n  min-height: 1px;\r\n  -webkit-border-radius: 2em;\r\n  -moz-border-radius: 2em;\r\n  border-radius: 2em;\r\n}\r\n/*滚动条移上去的背景*/\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background-color: #fff;\r\n}\r\n</style>"]}]}